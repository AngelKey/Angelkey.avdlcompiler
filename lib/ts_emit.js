// Generated by IcedCoffeeScript 108.0.13
(function() {
  var TypescriptEmitter, path_lib, pkg;

  path_lib = require('path');

  pkg = require('../package.json');

  exports.TypescriptEmitter = TypescriptEmitter = (function() {
    function TypescriptEmitter() {
      this._code = [];
      this._tabs = 0;
    }

    TypescriptEmitter.prototype.tab = function() {
      return this._tabs++;
    };

    TypescriptEmitter.prototype.untab = function() {
      return this._tabs--;
    };

    TypescriptEmitter.prototype.tabs = function() {
      var i;
      return ((function() {
        var _i, _ref, _results;
        _results = [];
        for (i = _i = 0, _ref = this._tabs; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
          _results.push("  ");
        }
        return _results;
      }).call(this)).join("");
    };

    TypescriptEmitter.prototype.output = function(l, _arg) {
      var frag;
      frag = (_arg != null ? _arg : {}).frag;
      if (this._last_frag) {
        this._code[this._code.length - 1] += l;
        this._last_frag = false;
      } else {
        this._code.push(this.tabs() + l);
      }
      if (frag) {
        return this._last_frag = true;
      } else {
        if ((l === "}" || l === ")") && this._tabs === 0) {
          return this._code.push("");
        }
      }
    };

    TypescriptEmitter.prototype.output_doc = function(d) {
      var line, _i, _len, _ref, _results;
      if (d != null) {
        _ref = d.split(/\n/);
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          line = _ref[_i];
          _results.push(this.output("// " + line.replace(/^\s*/, '')));
        }
        return _results;
      }
    };

    TypescriptEmitter.prototype.emit_preface = function(_arg) {
      var infile;
      infile = _arg.infile;
      this.output("/*");
      this.output(" * Auto-generated to TypeScript by " + pkg.name + " v" + pkg.version + " (" + pkg.homepage + ")");
      this.output(" *   Input file: " + (path_lib.relative(process.cwd(), infile)));
      this.output(" */");
      return this.output("");
    };

    TypescriptEmitter.prototype.emit_imports = function(_arg) {
      var import_as, imports, path, _i, _len, _ref, _results;
      imports = _arg.imports;
      _results = [];
      for (_i = 0, _len = imports.length; _i < _len; _i++) {
        _ref = imports[_i], import_as = _ref.import_as, path = _ref.path;
        _results.push(console.log(import_as, path));
      }
      return _results;
    };

    TypescriptEmitter.prototype.emit_types = function(_arg) {
      var go_field_suffix, type, types, _i, _len, _results;
      types = _arg.types, go_field_suffix = _arg.go_field_suffix;
      _results = [];
      for (_i = 0, _len = types.length; _i < _len; _i++) {
        type = types[_i];
        _results.push(this.emit_type({
          type: type,
          go_field_suffix: go_field_suffix
        }));
      }
      return _results;
    };

    TypescriptEmitter.prototype.emit_type = function(_arg) {
      var go_field_suffix, nostring, type;
      type = _arg.type, go_field_suffix = _arg.go_field_suffix;
      this.output_doc(type.doc);
      switch (type.type) {
        case "record":
          if (type.typedef) {
            return this.emit_typedef(type);
          } else {
            return this.emit_record({
              obj: type,
              go_field_suffix: go_field_suffix
            });
          }
          break;
        case "fixed":
          return this.emit_fixed(type);
        case "enum":
          nostring = type.go === "nostring";
          return this.emit_enum({
            t: type,
            nostring: nostring
          });
        case "variant":
          return this.emit_variant({
            obj: type,
            go_field_suffix: go_field_suffix
          });
      }
    };

    TypescriptEmitter.prototype.run = function(_arg) {
      var infile, json, types_only;
      infile = _arg.infile, json = _arg.json, types_only = _arg.types_only;
      this.emit_preface({
        infile: infile
      });
      this.emit_imports(json);
      return this._code;
    };

    return TypescriptEmitter;

  })();

}).call(this);
